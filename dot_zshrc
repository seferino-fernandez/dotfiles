# Editor
export EDITOR=nvim
export VISUAL="$EDITOR"

# Homebew
export HOMEBREW_NO_INSECURE_REDIRECT=1
export HOMEBREW_NO_ANALYTICS=1


# User configuration
# Java Configuration
jdk() {
  unset JAVA_HOME 
  export JAVA_HOME=$(/usr/libexec/java_home -v "$1");
  java -version
}
# Default Java
export JAVA_HOME=`/usr/libexec/java_home -v 17`

# Flutter Config
export PATH=$HOME/open-source/flutter/bin:$PATH
export PATH="$PATH":"$HOME/.pub-cache/bin"


# Gem + Cocoapods
export PATH=$HOME/.gem/bin:$PATH

# bun completions
[ -s "/Users/seferinofernandez/.bun/_bun" ] && source "/Users/seferinofernandez/.bun/_bun"

# bun
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"

## Completion scripts setup. Remove the following line to uninstall
[[ -f /Users/seferinofernandez/.dart-cli-completion/zsh-config.zsh ]] && . /Users/seferinofernandez/.dart-cli-completion/zsh-config.zsh || true
## [/Completion]


# Node + NPM + PNPM
# Use fnm
eval "$(fnm env --version-file-strategy=recursive --use-on-cd --corepack-enabled --shell zsh)"


# Python + uv + uvx
eval "$(uv generate-shell-completion zsh)"
eval "$(uvx --generate-shell-completion zsh)"

# The next line updates PATH for the Google Cloud SDK.
if [ -f '/Users/seferinofernandez/google-cloud-sdk/path.zsh.inc' ]; then . '/Users/seferinofernandez/google-cloud-sdk/path.zsh.inc'; fi

# The next line enables shell command completion for gcloud.
if [ -f '/Users/seferinofernandez/google-cloud-sdk/completion.zsh.inc' ]; then . '/Users/seferinofernandez/google-cloud-sdk/completion.zsh.inc'; fi
. "$HOME/.cargo/env"

# Set up fzf key bindings and fuzzy completion
source <(fzf --zsh)

# Setup ZSH Aliases
system=`uname -s`
zshdir=$HOME/.zshrc.d
if [ -d $zshdir ]; then
    pattern=".*/[0-9]+.*\.z?sh$"
    if [ $system = "Darwin" ]; then
       files=$(command find -E $zshdir -regex "$pattern"|sort)
    else
        files=$(command find $zshdir -regex $pattern|sort)
    fi
    for i in ${(f)files}; do # param extension flag 'f' strips newlines
        if [ -r $i ]; then
            . $i
        fi
    done
    unset i
fi
unset zshdir files pattern

eval "$(zoxide init zsh)"
eval "$(~/.local/bin/mise activate)"

# Zsh Plugin Manager - Sheldon
eval "$(sheldon source)"

# Starship
eval "$(starship init zsh)"
